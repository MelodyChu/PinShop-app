{% extends 'base.html' %}
{% block content %}
    <h1>PinShop</h1>
    <div>
    <p><h3>Search for your favorite styles by using your pins and images!</h3></p>
</div>
     <form action="/search" method="POST" id="image_form">
      <p><h4>Search by Image URL</h4></p>
    <div class="form-group">
      <label>Image URL:
          <input type="url" name="image_URL" class="image_URL" id="image_URL">
      </label>
      <input type="hidden" name="image_desc" id="image_desc"></input>
    </div>

    <div class="form-group">
      <p><input type="submit" value="Search on Etsy" id="Etsy-search" class="btn btn-primary"></p>
    </div>

  </form>

  {# SEARCH FOR BOARD PORTION IF USER PROVIDES PINTEREST NAME #}
  <form action="/search" method="GET"> {# make sure this is correctly a get request; need to send board name #}
  {% if "pin_username" in session %}
    <p><h4>Search your pins</h4></p>
    <p><h4>Filter by specific board</h4></p> <!-- Allow user to input specific board name -->
    <div class="form-group">
      <label>Pinterest Board Name:
          <input type="text" name="board-name" class="board-name">
      </label>
    </div>

    <div class="form-group">
      <p><input type="submit" value="Load Board" class="btn btn-primary"></p>
    </div>
  </form>

  {% else %}
    <p><h4>Search sample pins</h4></p>
  {% endif %}

  {# SEARCH FOR SPECIFIC PIN AND SUBMIT #}
<div id="pin-list">
  {% for pin in melody_pins %} {# melody_pins can either be sample pins or melody's pins depending on session #}
    <div>
      <a href="{{ pin['link'] }}" ><img src="{{ pin['image'] }}">{{ pin['description'] }}</a>
      <input type="radio" name="pin-select" class="radiobutton" data-pinimage="{{ pin['image'] }}" data-pindesc="{{ pin['description'] }}">
    </div>
  {% endfor %}
</div>

<script type="text/javascript">

$('.radiobutton').click(
  function (evt) {
   
    let button_data = $(this).data("pinimage");
    let description = $(this).data("pindesc");
    console.log(button_data);
    console.log(description);
    $("#image_URL")[0].value = button_data;
    $('#image_desc')[0].value = description 
  }
  )

</script>
{% endblock %}