<html>
<head>
    <title>PinShop Results</title>
</head>
<body>
    <h1>PinShop Etsy Results</h1>

  {% for result in results %}
    <div>
      <a href="{{ result['url'] }}"><img src="{{ result['MainImage']['url_170x135'] }}" style="width:100px;height:100px;">{{ result['title'] }}</a>
      {# <p>{{ result['price'] }}</p> #}
      {# <button class="save-button" data-listing-data="{{ json.dumps(result) }}" >Save</button> #}
      <button class="save-button" data-listing-data="{{ result|tojson|safe }}" >Save</button> 
      {# is this the right place for Save? will it be rendered for each result? #}
    </div>
  {% endfor %}


<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script> 
<script>
$(".save-button").click(function (evt) {
    let listingData = $(this).data("listingData"); // may need JSON dumps here

    let payload = {"listing_data": listingData} // does passing data always need to be in payload dictionary format?
    $.post("/add-bookmark.json", payload, function (results) {
        //give user some visual indication that this has happened
        $('#save-button').html("Saved");
        console.log("Finished saving Etsy result!");
    });
});

</script>

</body>
</html>